<!-- Cabeçalho da Página -->
<header class="dashboard-header">
    <h1>Bem-vindo, <%= user.name.split(' ')[0] %>!</h1>
    <p>Aqui está um resumo da atividade da sua loja.</p>
    <p>Razão social: <%= company.razaoSocial  %></p>
    <p>CNPJ: <%= company.cnpj %></p>
</header>

<!-- Cards de Estatísticas -->
<section class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon blue"><i class="fa-solid fa-dollar-sign"></i></div>
        <div class="stat-info">
            <h3>R$ <%= stats.totalRevenue.toFixed(2).replace('.', ',') %></h3>
            <p>Receita Total (Aprovada)</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon green"><i class="fa-solid fa-receipt"></i></div>
        <div class="stat-info">
            <h3><%= stats.totalOrders %></h3>
            <p>Total de Pedidos Recebidos</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon indigo"><i class="fa-solid fa-box-archive"></i></div>
        <div class="stat-info">
            <h3><%= stats.totalProducts %></h3>
            <p>Produtos Cadastrados</p>
        </div>
    </div>
</section>

<!-- Ações Rápidas -->
<section class="quick-actions">
    <h2>Ações Rápidas</h2>
    <div class="actions-grid">
        <a href="/supplier/products/new" class="action-card">
            <i class="fa-solid fa-plus"></i>
            <span>Adicionar Produto</span>
        </a>
        <a href="/supplier/products" class="action-card">
            <i class="fa-solid fa-box-open"></i>
            <span>Ver Produtos</span>
        </a>
        <a href="/supplier/profile/edit" class="action-card">
            <i class="fa-solid fa-pen-to-square"></i>
            <span>Editar Perfil da Loja</span>
        </a>
    </div>
</section>


<!-- Pedidos Recentes -->
<section class="dashboard-section">
    <div class="section-header">
        <h2>Histórico de Pedidos</h2>
        <!-- O link "Ver Todos" não é mais necessário aqui -->
    </div>
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Pedido</th>
                    <th>Data</th>
                    <th>Comprador</th>
                    <th>Valor Total</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <% if (orders.length > 0) { %>
                    <% orders.forEach(order => { %>
                        <tr>
                            <td><strong>#<%= order.orderNumber %></strong></td>
                            <td><%= new Date(order.createdAt).toLocaleDateString('pt-BR') %></td>
                            <td><%= order.buyer.name %></td>
                            <td>R$ <%= Number(order.totalAmount).toFixed(2).replace('.', ',') %></td>
                            <td><span class="badge badge-<%= order.status.toLowerCase() %>"><%= order.status %></span></td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="6">
                            <div class="empty-state" style="padding: 2rem 0;">
                                <p>Nenhum pedido recebido ainda.</p>
                            </div>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

    <!-- CONTROLES DE PAGINAÇÃO -->
    <% if (pagination.totalPages > 1) { %>
        <div class="pagination">
            <!-- Botão 'Anterior' -->
            <% if (pagination.currentPage > 1) { %>
                <a href="/supplier/dashboard?page=<%= pagination.currentPage - 1 %>">&laquo; Anterior</a>
            <% } else { %>
                <span class="disabled">&laquo; Anterior</span>
            <% } %>

            <!-- Números das Páginas (lógica simplificada) -->
            <% for (let i = 1; i <= pagination.totalPages; i++) { %>
                <% if (i === pagination.currentPage) { %>
                    <span class="active"><%= i %></span>
                <% } else { %>
                    <a href="/supplier/dashboard?page=<%= i %>"><%= i %></a>
                <% } %>
            <% } %>

            <!-- Botão 'Próximo' -->
            <% if (pagination.currentPage < pagination.totalPages) { %>
                <a href="/supplier/dashboard?page=<%= pagination.currentPage + 1 %>">Próximo &raquo;</a>
            <% } else { %>
                <span class="disabled">Próximo &raquo;</span>
            <% } %>
        </div>
    <% } %>
</section>