<!-- Cabeçalho da Página -->
<% if (typeof error_msg !== 'undefined' && error_msg.length > 0) { %>
    <div class="alert alert--error" style="margin: 1.5rem;">
        <i class="fas fa-exclamation-circle alert__icon"></i>
        <div class="alert__content">
            <strong>Por favor, corrija os seguintes erros:</strong>
            <ul>
                <% error_msg.forEach(msg => { %>
                    <li><%= msg %></li>
                <% }) %>
            </ul>
        </div>
        <button class="alert__close" aria-label="Fechar">&times;</button>
    </div>
<% } %>


<header class="dashboard-header">
    <h1>Adicionar Novo Produto</h1>
    <p>Preencha os detalhes abaixo para cadastrar um novo item em sua loja.</p>
</header>

<!-- Seção do Formulário -->
<section class="dashboard-section">
    <div class="section-header">
        <h2>Detalhes do Produto</h2>
    </div>

    <div style="padding: 1.5rem;">
        <form action="/supplier/products" method="POST">
            
            <!-- Nome e Descrição -->
            <div class="form-group">
                <label for="name">Nome do Produto</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Ex: Motor Elétrico Trifásico 5CV" required>
            </div>

            <div class="form-group">
                <label for="description">Descrição Completa</label>
                <textarea id="description" name="description" class="form-control" rows="6" placeholder="Descreva as características, aplicações e benefícios do produto." required></textarea>
            </div>

            <!-- Categoria e NCM -->
            <div class="form-row">
                <div class="form-group">
                    <label for="categoryId">Categoria</label>
                    <select id="categoryId" name="categoryId" class="form-control" required>
                        <option value="" disabled selected>Selecione uma categoria</option>
                        <% categories.forEach(category => { %>
                            <option value="<%= category.id %>"><%= category.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ncm">NCM (Opcional)</label>
                    <input type="text" id="ncm" name="ncm" class="form-control" placeholder="Ex: 85015290">
                </div>
            </div>

            <!-- Preço, Estoque e Unidade -->
            <div class="form-row">
                <div class="form-group">
                    <label for="price">Preço (R$)</label>
                    <input type="number" id="price" name="price" class="form-control" placeholder="Ex: 1250.99" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="stockQuantity">Quantidade em Estoque</label>
                    <input type="number" id="stockQuantity" name="stockQuantity" class="form-control" placeholder="Ex: 50" step="1" required>
                </div>
                <div class="form-group">
                    <label for="unit">Unidade de Medida</label>
                    <select id="unit" name="unit" class="form-control" required>
                        <option value="un">Unidade (un)</option>
                        <option value="cx">Caixa (cx)</option>
                        <option value="kg">Quilograma (kg)</option>
                        <option value="m">Metro (m)</option>
                        <option value="m2">Metro² (m²)</option>
                        <option value="m3">Metro³ (m³)</option>
                        <option value="l">Litro (l)</option>
                        <option value="par">Par</option>
                    </select>
                </div>
            </div>

            <!-- Imagens -->
            <div class="form-group">
                <label for="imageUrls">URLs das Imagens</label>
                <textarea id="imageUrls" name="imageUrls" class="form-control" rows="3" placeholder="Cole as URLs das imagens, separadas por vírgula. A primeira será a principal." required></textarea>
                <small class="form-text">Separe múltiplas URLs com uma vírgula (,). Ex: https://.../img1.jpg, https://.../img2.jpg</small>
            </div>

            <!-- Botões de Ação -->
            <div class="form-actions">
                <a href="/supplier/products" class="btn btn--secondary">Cancelar</a>
                <button type="submit" class="btn btn--primary">
                    <i class="fa-solid fa-check"></i> Salvar Produto
                </button>
            </div>
        </form>
    </div>
</section>
