<header class="header">
    <div class="header__main">
        <div class="container">
            
            <!-- Logo -->
            <a href="/" class="header__logo">
                <i class="fa-solid fa-industry"></i>
                <span>Marketplace</span>
            </a>

            <!-- Barra de Pesquisa Central -->
            <div class="header__search-wrapper">
                <form action="/search" method="GET" class="header__search">
                    <input type="text" name="q" class="header__search-input" placeholder="Buscar produtos ou fornecedores..." required>
                    <button type="submit" class="header__search-button" aria-label="Buscar">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </form>
            </div>

            <!-- Ações e Navegação do Usuário -->
            <div class="header__actions">
                <% if (!user) { %>
                    <!-- Menu para Visitantes -->
                    <nav class="header__nav--visitor">
                        <a href="/catalog" class="header__nav-link">Catálogo</a>
                        <a href="/auth/login" class="btn btn--outline">Entrar</a>
                        <a href="/auth/register" class="btn btn--primary">Cadastre-se</a>
                    </nav>
                <% } else { %>
                    <!-- Menu para Usuários Logados -->
                    <nav class="header__nav--user">
                        <a href="/supplier/dashboard" class="header__action-btn" title="Dashboard">
                            <i class="fa-solid fa-table-columns"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="/notifications" class="header__action-btn" title="Notificações">
                            <i class="fa-solid fa-bell"></i>
                            <% if (unreadNotifications > 0) { %>
                                <span class="notification-badge"><%= unreadNotifications %></span>
                            <% } %>
                            <span>Notificações</span>
                        </a>

                        <!-- Dropdown do Usuário -->
                        <div class="user-dropdown">
                            <button class="user-dropdown__toggle" aria-label="Menu do usuário">
                                <img src="<%= user.avatar || '/images/default-avatar.png' %>" alt="Avatar de <%= user.name %>" class="user-avatar">
                                <span class="user-name"><%= user.name.split(' ')[0] %></span>
                                <i class="fa-solid fa-chevron-down"></i>
                            </button>
                            <div class="user-dropdown__menu">
                                <div class="user-dropdown__header">
                                    <strong><%= user.name %></strong>
                                    <small><%= user.email %></small>
                                </div>
                                <a href="/profile"><i class="fa-solid fa-user-pen"></i> Meu Perfil</a>

                                <% if (user.userType === 'SUPPLIER' && !user.company) { %>
                                    <a href="/auth/complete-profile" class="highlight-action">
                                        <i class="fa-solid fa-store"></i> 
                                        <strong>Complete o Perfil da Empresa</strong>
                                    </a>
                                <% } %>
                                
                                <a href="/orders"><i class="fa-solid fa-box-archive"></i> Meus Pedidos</a>
                                <a href="/favorites"><i class="fa-solid fa-heart"></i> Favoritos</a>
                                <hr>
                                <a href="/auth/logout" class="logout-link"><i class="fa-solid fa-right-from-bracket"></i> Sair</a>
                            </div>
                        </div>
                    </nav>
                <% } %>
            </div>

            <!-- Botão do Menu Mobile -->
            <button class="header__mobile-toggle" aria-label="Abrir menu">
                <i class="fa-solid fa-bars"></i>
            </button>

        </div>
    </div>
</header>
